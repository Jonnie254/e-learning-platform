<app-navbar></app-navbar>
<app-confirmation-dialog
  [isVisible]="isConfirmationDialogVisible"
  [title]="modalTitle"
  [message]="modalMessage"
  [iconClass]="modalIconClass"
  [confirmButtonText]="modalConfirmButtonText"
  [cancelButtonText]="modalCancelButtonText"
  (onConfirm)="onConfirmAction()"
  (onClose)="closeModal()"
  (onCancel)="closeModal()">
</app-confirmation-dialog>

<app-notifications
  [show]="notification.show"
  [message]="notification.message"
  [type]="notification.type"
  (close)="closeNotification()">
</app-notifications>

<div class="max-w-screen-xl mx-auto px-4 py-6">
  <div class="flex flex-col items-center justify-center text-center mb-8 gap-4">
    <div>
      <h1 class="text-4xl font-medium text-gray-900 tracking-tight">Know More About You</h1>
      <p class="text-gray-600 mt-3 text-base sm:text-lg max-w-2xl">
        Help us personalize your experience by sharing your learning goals and interests.
      </p>
    </div>
  </div>
  <div class="border border-gray-300 rounded-xl p-8 max-w-screen-lg mx-auto shadow-md bg-gray-50">
    <form [formGroup]="addKnowAboutYouForm">
      <div class="space-y-6">
        <div>
          <label for="learning-goal" class="text-gray-700 text-sm font-medium block mb-1">Learning Goal</label>
          <select id="learning-goal" formControlName="learningGoal" class="w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-100">
            <option>Select Learning Goal</option>
            <option *ngFor="let goal of learningGoal" [value]="goal">{{ goal }}</option>
          </select>
        </div>
        <div>
          <label for="preferred-skill-level" class="text-gray-700 text-sm font-medium block mb-1">Preferred Skill Level</label>
          <select id="preferred-skill-level" formControlName="preferredSkillLevel" class="w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-100">
            <option>Select Skill Level</option>
            <option *ngFor="let level of preferredSkillLevel" [value]="level">{{ level }}</option>
          </select>
        </div>
        <div>
          <label for="interested-category" class="text-gray-700 text-sm font-medium block mb-1">Interested Category</label>
          <select id="interested-category" formControlName="interestedCategory" class="w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-100">
            <option>Select Interested Category</option>
            <option *ngFor="let category of interestedCategory.content" [value]="category.categoryName">{{ category.categoryName }}</option>
          </select>
        </div>
        <div>
          <label for="interested-tags" class="text-gray-700 text-sm font-medium block mb-1">Interested Tags</label>
          <select id="interested-tags" formControlName="interestedTags" (change)="addTag($event)" class="w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-100">
            <option>Select Interested Tag</option>
            <option *ngFor="let tag of interestedTags.content" [value]="tag.tagId">{{ tag.tagName }}</option>
          </select>
          <div class="flex flex-wrap gap-2 mt-3">
            <div *ngFor="let tag of selectedTags" class="bg-gray-200 text-gray-700 px-3 py-1 rounded-full flex items-center gap-2">
              {{ tag.tagName }}
              <i *ngIf="isEditMode" (click)="removeTag(tag)" class="pi pi-times-circle text-gray-500 hover:text-red-500 cursor-pointer"></i>
            </div>
          </div>
        </div>
        <div class="flex justify-end items-center mt-6">
          <button
            *ngIf="!isEditMode"
            (click)="enableEditMode()"
            class="inline-flex items-center gap-2 bg-gray-800 hover:bg-gray-700 text-white font-medium px-5 py-2.5 rounded-xl shadow transition-all">
            <i class="pi pi-pencil text-base"></i>
            Edit
          </button>
          <div *ngIf="isEditMode" class="flex gap-4">
            <button
              (click)="confirmTheAction()"
              type="submit"
              class="bg-gray-700 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition-colors">
              {{ actionType === 'add' ? 'Add' : 'Update' }}
            </button>
            <button
              (click)="setEditMode()"
              type="button"
              class="bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-400 transition-colors">
              Cancel
            </button>
          </div>
        </div>
      </div>
    </form>
  </div>
</div>
